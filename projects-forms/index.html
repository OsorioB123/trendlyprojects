<html lang="pt-BR"><head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Qualificação Trendly Projects</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&amp;display=swap" rel="stylesheet">
<script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
<style>
:root {
--brand-yellow: #efd135;
}
body {
-webkit-tap-highlight-color: transparent;
font-family: 'Inter', sans-serif;
}
.liquid-glass-card {
backdrop-filter: blur(25px);
background-color: rgba(255, 255, 255, 0.08);
border: 1px solid rgba(255, 255, 255, 0.14);
}
.liquid-glass-element {
backdrop-filter: blur(20px);
background-color: rgba(255, 255, 255, 0.05);
border: 1px solid rgba(255, 255, 255, 0.18);
}
.option-btn.selected {
background-color: rgba(255, 255, 255, 0.2) !important;
border-color: rgba(255, 255, 255, 0.4) !important;
}
.primary-btn {
background-color: white;
color: black;
transition: background-color 0.3s ease;
}
.primary-btn:hover {
background-color: #e5e5e5;
}
.primary-btn:active {
transform: scale(0.98);
}
.primary-btn:disabled {
opacity: 0.5;
cursor: not-allowed;
}
.form-input {
background-color: rgba(255, 255, 255, 0.05);
border: 1px solid rgba(255, 255, 255, 0.2);
transition: border-color 0.3s ease;
}
.form-input:focus {
outline: none;
border-color: rgba(255, 255, 255, 0.5);
}
.form-input.error {
border-color: rgba(239, 68, 68, 0.8);
}
.error-message {
color: #ef4444;
font-size: 0.875rem;
margin-top: 0.25rem;
}
.fade-transition {
transition: opacity 0.4s ease-out, transform 0.4s ease-out;
}
.loading-spinner {
border: 2px solid rgba(255, 255, 255, 0.3);
border-radius: 50%;
border-top: 2px solid white;
width: 20px;
height: 20px;
animation: spin 1s linear infinite;
}
@keyframes spin {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}
.toast {
position: fixed;
bottom: 20px;
right: 20px;
padding: 16px 24px;
border-radius: 8px;
display: flex;
align-items: center;
gap: 12px;
z-index: 1000;
animation: slideIn 0.3s ease-out;
}
@keyframes slideIn {
from {
transform: translateX(100%);
opacity: 0;
}
to {
transform: translateX(0);
opacity: 1;
}
}
.toast.success {
background-color: #10b981;
color: white;
}
.toast.error {
background-color: #ef4444;
color: white;
}
</style>
</head>

<body class="min-h-screen bg-gray-950 flex items-center justify-center p-4 text-white">
<div class="fixed top-0 w-full h-screen bg-cover bg-center -z-10" style="background-image: url('https://i.ibb.co/bMThjYDH/Sem-nome-Apresenta-o-43-64-x-40-px-180-x-96-px-2560-x-1440-px-7.webp?w=800&amp;q=80');"></div>
  <div class="relative w-full max-w-2xl">
    <div class="liquid-glass-card rounded-3xl shadow-2xl">
      <div class="relative z-10">
        <!-- Header com Progress -->
        <div class="px-8 pt-8 pb-6 text-center">
          <img src="https://i.ibb.co/TVzjvBn/Logo-Trendly-Redes-Sociais-15.png" alt="Logo Trendly" class="w-40 h-auto mx-auto mb-6">
          
          <!-- Progress Bar with counters -->
          <div class="mb-2">
            <div class="flex justify-between text-xs text-white/60 mb-1">
              <span id="stepCounter">1/10</span>
              <span id="percentCounter">10%</span>
            </div>
            <div class="relative rounded-full overflow-hidden h-1.5 bg-white/10">
              <div id="progressBar" class="h-full bg-white rounded-full transition-all duration-500 ease-out" style="width: 0%"></div>
            </div>
          </div>
        </div>

        <div class="px-8 pb-8">
          <!-- Introdução -->
          <section id="intro" class="fade-transition">
            <div class="mb-8 text-center">
              <h1 class="sm:text-4xl text-3xl font-semibold tracking-tight mb-2">Escale seu conteúdo e suas vendas sem depender da criatividade</h1>
              <p class="text-base font-light text-white/70">Implemente agora o sistema completo que integra conteúdo e vendas que somam mais de 500.000 visualizações orgânicas por mês para nossos clientes, investindo apenas 1 hora por semana.</p>
            </div>

            <div class="space-y-4">
              <div class="liquid-glass-element rounded-xl pt-6 pr-6 pb-6 pl-6">
                <div class="flex items-start gap-4 mb-5">
                  
                  <div class="">
                    <h3 class="text-base font-medium mb-1 text-white">O que é o Trendly Projects</h3>
                    <p class="leading-relaxed text-sm text-white/60">É a nossa implementação contínua de conteúdo, autoridade e vendas combinando múltiplos funis conectados para gerar valor antes da venda.
Projetado para marcas e empresários que querem crescer com consistência, inteligência e leveza.</p>
                  </div>
                </div>
              </div>

              <div class="pt-4">
                <button id="startForm" class="primary-btn w-full font-semibold py-4 px-6 rounded-xl flex items-center justify-center gap-2">
                  <span class="">Estou pronto para continuar</span>
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="arrow-right" class="lucide lucide-arrow-right w-5 h-5"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg>
                </button>
              </div>
            </div>
          </section>

          <!-- Questions Container -->
          <section id="questions" class="hidden">
            <div id="questionContainer" class="fade-transition">
              <div class="mb-8 text-center">
                <h2 id="questionTitle" class="text-xl sm:text-2xl font-medium leading-tight text-white">Primeiro, com quem estamos falando?</h2>
              </div>

              <div id="optionsContainer" class="space-y-4 mb-8">
                <!-- Options will be dynamically inserted here -->
              </div>

              <div class="flex gap-3">
                <button id="prevBtn" class="flex-1 liquid-glass-element text-white/70 font-medium py-3 px-4 rounded-xl transition-all duration-200 flex items-center justify-center gap-2 hover:bg-white/10 opacity-50 pointer-events-none">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="arrow-left" class="lucide lucide-arrow-left w-4 h-4"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg>
                  <span>Anterior</span>
                </button>
                <button id="nextBtn" class="primary-btn flex-1 font-semibold py-3 px-4 rounded-xl flex items-center justify-center gap-2 opacity-50 pointer-events-none">
                  <span>Continuar</span>
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="arrow-right" class="lucide lucide-arrow-right w-4 h-4"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg>
                </button>
              </div>
            </div>
          </section>

          <!-- LGPD Consent Section -->
          <section id="lgpdConsent" class="hidden fade-transition">
            <div class="mb-8 text-center">
              <h2 class="text-xl sm:text-2xl font-medium leading-tight text-white mb-4">Termos de Uso e Privacidade</h2>
              <p class="text-sm text-white/70">Para continuar, precisamos do seu consentimento sobre o uso dos seus dados.</p>
            </div>

            <div class="space-y-4 mb-8">
              <div class="liquid-glass-element rounded-xl p-4">
                <label class="flex items-start gap-3 cursor-pointer">
                  <input type="checkbox" id="lgpdCheckbox" class="mt-1">
                  <span class="text-sm text-white/80">
                    Li e concordo com os <a href="#" class="underline hover:text-white">Termos de Uso</a> e a <a href="#" class="underline hover:text-white">Política de Privacidade</a>. 
                    Autorizo o Trendly Projects a coletar e processar meus dados para fins de qualificação e contato comercial, 
                    podendo compartilhar informações com parceiros quando necessário para a prestação dos serviços.
                  </span>
                </label>
              </div>

              <div class="liquid-glass-element rounded-xl p-4">
                <label class="flex items-start gap-3 cursor-pointer">
                  <input type="checkbox" id="marketingCheckbox" checked>
                  <span class="text-sm text-white/80">
                    Aceito receber comunicações sobre produtos, serviços e conteúdos do Trendly Projects por e-mail e WhatsApp.
                  </span>
                </label>
              </div>
            </div>

            <button id="lgpdContinueBtn" class="primary-btn w-full font-semibold py-3 px-4 rounded-xl flex items-center justify-center gap-2 opacity-50 pointer-events-none">
              <span>Aceitar e continuar</span>
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="arrow-right" class="lucide lucide-arrow-right w-4 h-4"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg>
            </button>
          </section>

          <!-- Results Section -->
          <section id="results" class="hidden fade-transition">
            <div id="resultsQualified" class="hidden">
              <div class="text-center mb-6">
                <div class="mx-auto w-16 h-16 rounded-full liquid-glass-element flex items-center justify-center mb-4 border border-white/20">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="check" class="lucide lucide-check w-8 h-8 text-white"><path d="M20 6 9 17l-5-5"></path></svg>
                </div>
                <h2 class="text-3xl font-semibold tracking-tight text-white">Você está no ponto certo para o Trendly Projects</h2>
                <p class="text-base font-light text-white/70 mt-2">Com base nas suas respostas, o Trendly Projects é ideal para o seu momento. Nossa equipe vai entrar em contato nas próximas 24 horas para agendar uma conversa estratégica e mostrar como podemos escalar seus resultados com leveza e inteligência.</p>
              </div>
              
              <div class="space-y-4">
                <a href="https://substack.com/@trendlyinsights" target="_blank" class="primary-btn w-full font-semibold py-4 px-6 rounded-xl flex items-center justify-center gap-2">
                  <span>Assinar nossa newsletter</span>
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="mail" class="lucide lucide-mail w-5 h-5"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                </a>
                
                <p class="text-sm text-white/60 text-center px-4">
                  Enquanto aguarda nosso contato, receba insights semanais sobre marketing, vendas e estratégias que realmente funcionam.
                </p>
              </div>
            </div>

            <div id="resultsTrendlyAI" class="hidden">
              <div class="text-center mb-6">
                <div class="mx-auto w-16 h-16 rounded-full liquid-glass-element flex items-center justify-center mb-4 border border-white/20">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="sparkles" class="lucide lucide-sparkles w-8 h-8 text-white"><path d="M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z"></path><path d="M20 2v4"></path><path d="M22 4h-4"></path><circle cx="4" cy="20" r="2"></circle></svg>
                </div>
                <h2 class="text-3xl font-semibold tracking-tight text-white">Obrigado pelo seu interesse no Trendly Projects</h2>
                <p class="text-base font-light text-white/70 mt-2">Com base nas suas respostas, estamos desenvolvendo produtos que se adequem melhor à sua etapa atual. Entraremos em contato quando tivermos soluções ideais para o seu momento.</p>
              </div>
              
              <div class="space-y-4">
                <a href="https://substack.com/@trendlyinsights" target="_blank" class="primary-btn w-full font-semibold py-4 px-6 rounded-xl flex items-center justify-center gap-2">
                  <span>Assinar nossa newsletter</span>
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="mail" class="lucide lucide-mail w-5 h-5"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                </a>
                
                <p class="text-sm text-white/60 text-center px-4">
                  Receba insights semanais sobre marketing, vendas e fique por dentro das novidades do Trendly Projects.
                </p>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div id="toastContainer"></div>

  <script>
    // Google Apps Script Configuration
    // URL do Google Apps Script para salvar os dados
    const GOOGLE_APPS_SCRIPT_URL = 'https://script.google.com/a/macros/trendlycorp.com/s/AKfycbzTN6TA3ua0vGeh_TJBUuoOrSnjkTg9d2jln54fPYmSo-gDOPJs2xaKpYRQZKuJMOkE/exec';

    // Questions Data
    const screens = [
      {
        id: "name",
        title: "Primeiro, com quem estamos falando?",
        type: "field",
        field: {
          name: "fullName",
          type: "text",
          placeholder: "Nome completo",
          required: true,
          validation: "name"
        }
      },
      {
        id: "email",
        title: "Qual é o seu melhor e-mail para mantermos contato?",
        type: "field",
        field: {
          name: "email",
          type: "email",
          placeholder: "seu@email.com",
          required: true,
          validation: "email"
        }
      },
      {
        id: "phone",
        title: "Se preferir, qual seu número de WhatsApp para falarmos com mais agilidade?",
        type: "field",
        field: {
          name: "phone",
          type: "tel",
          placeholder: "(11) 99999-9999",
          required: true,
          validation: "phone"
        }
      },
      {
        id: "currentState",
        title: "Como você descreveria o momento atual da sua empresa em relação ao marketing?",
        type: "options",
        options: [
          { text: "Ainda estamos tentando organizar a estratégia", points: 0 },
          { text: "Temos bons resultados, mas falta escala e constância", points: 10 },
          { text: "Estamos prontos para um próximo nível, só falta a estrutura certa", points: 15 },
          { text: "Já rodamos bem, mas buscamos posicionamento e autonomia a longo prazo", points: 20 }
        ]
      },
      {
        id: "mainDesire",
        title: "Se o Trendly Projects funcionasse exatamente como você espera, o que você gostaria de conquistar nos próximos 12 meses?",
        type: "options",
        options: [
          { text: "Um marketing previsível que traga vendas constantes", points: 15 },
          { text: "Crescimento com menos dependência de mim ou da minha equipe", points: 15 },
          { text: "Autoridade real no mercado e reconhecimento como referência", points: 20 },
          { text: "Uma estrutura escalável com processos claros", points: 20 }
        ]
      },
      {
        id: "involvement",
        title: "Qual seria seu nível ideal de envolvimento nesse projeto?",
        type: "options",
        options: [
          { text: "Quero acompanhar de perto e aprovar decisões", points: 20 },
          { text: "Quero liderar com apoio do time", points: 15 },
          { text: "Quero delegar, mas com clareza sobre o processo", points: 10 },
          { text: "Prefiro que tudo seja conduzido sem meu envolvimento", points: 0 }
        ]
      },
      {
        id: "investment",
        title: "Sobre o investimento entre R$120k a R$200k/ano em um projeto estratégico, qual dessas frases representa melhor você?",
        type: "options",
        options: [
          { text: "Já destino esse tipo de valor para marketing e vejo retorno", points: 25 },
          { text: "Posso investir, mas preciso entender bem o retorno", points: 20 },
          { text: "É alto, mas estou buscando alternativas", points: 10 },
          { text: "Não posso investir nesse momento", points: 0, eliminatory: true }
        ]
      },
      {
        id: "timing",
        title: "Qual o momento ideal para começar esse projeto, caso faça sentido para você?",
        type: "options",
        options: [
          { text: "Imediatamente — quero avançar agora", points: 15 },
          { text: "Nas próximas semanas", points: 10 },
          { text: "Daqui a alguns meses", points: 5 },
          { text: "Estou apenas explorando por enquanto", points: 0, eliminatory: "lowScore" }
        ]
      },
      {
        id: "aiVision",
        title: "Como você enxerga o uso de Inteligência Artificial no marketing?",
        type: "options",
        options: [
          { text: "Acredito que é o futuro e quero aplicar com estratégia", points: 10 },
          { text: "Já uso para algumas tarefas e quero aprofundar", points: 7 },
          { text: "Tenho curiosidade, mas ainda não entendo bem", points: 3 },
          { text: "Prefiro formas mais tradicionais de fazer marketing", points: 0 }
        ]
      }
    ];

    // State
    let currentScreenIndex = -1;
    let answers = {};
    let userData = {
      fullName: "",
      email: "",
      phone: ""
    };
    let questionAnswers = {};
    let totalPoints = 0;
    let eliminatoryTriggered = false;
    let lgpdAccepted = false;
    let marketingAccepted = true;

    // Elements
    const intro = document.getElementById('intro');
    const questionsSection = document.getElementById('questions');
    const lgpdSection = document.getElementById('lgpdConsent');
    const resultsSection = document.getElementById('results');
    const resultsQualified = document.getElementById('resultsQualified');
    const resultsTrendlyAI = document.getElementById('resultsTrendlyAI');
    const startBtn = document.getElementById('startForm');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const lgpdContinueBtn = document.getElementById('lgpdContinueBtn');
    const lgpdCheckbox = document.getElementById('lgpdCheckbox');
    const marketingCheckbox = document.getElementById('marketingCheckbox');
    const progressBar = document.getElementById('progressBar');
    const stepCounter = document.getElementById('stepCounter');
    const percentCounter = document.getElementById('percentCounter');
    const questionTitle = document.getElementById('questionTitle');
    const optionsContainer = document.getElementById('optionsContainer');
    const questionContainer = document.getElementById('questionContainer');

    // Validation functions
    function validateEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    }

    function validatePhone(phone) {
      const cleaned = phone.replace(/\D/g, '');
      return cleaned.length >= 10 && cleaned.length <= 11;
    }

    function formatPhone(phone) {
      const cleaned = phone.replace(/\D/g, '');
      if (cleaned.length === 11) {
        return cleaned.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
      } else if (cleaned.length === 10) {
        return cleaned.replace(/(\d{2})(\d{4})(\d{4})/, '($1) $2-$3');
      }
      return phone;
    }

    function showToast(message, type = 'success') {
      const toastContainer = document.getElementById('toastContainer');
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      
      const icon = type === 'success' 
        ? '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"></path></svg>'
        : '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>';
      
      toast.innerHTML = `${icon}<span>${message}</span>`;
      toastContainer.appendChild(toast);
      
      setTimeout(() => {
        toast.style.animation = 'slideIn 0.3s ease-out reverse';
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      lucide.createIcons({ strokeWidth: 1.5 });
    });

    // LGPD Checkbox handling
    lgpdCheckbox.addEventListener('change', () => {
      lgpdAccepted = lgpdCheckbox.checked;
      if (lgpdAccepted) {
        lgpdContinueBtn.classList.remove('opacity-50', 'pointer-events-none');
      } else {
        lgpdContinueBtn.classList.add('opacity-50', 'pointer-events-none');
      }
    });

    marketingCheckbox.addEventListener('change', () => {
      marketingAccepted = marketingCheckbox.checked;
    });

    // LGPD Continue
    lgpdContinueBtn.addEventListener('click', () => {
      if (!lgpdAccepted) return;
      
      showFinalResults();
    });

    // Start form
    startBtn.addEventListener('click', () => {
      intro.style.opacity = '0';
      intro.style.transform = 'translateX(-20px)';
      
      setTimeout(() => {
        intro.classList.add('hidden');
        questionsSection.classList.remove('hidden');
        questionsSection.style.opacity = '0';
        questionsSection.style.transform = 'translateX(20px)';
        
        setTimeout(() => {
          questionsSection.style.opacity = '1';
          questionsSection.style.transform = 'translateX(0)';
        }, 50);
        
        currentScreenIndex = 0;
        showCurrentScreen();
      }, 400);
    });

    // Navigation
    prevBtn.addEventListener('click', () => {
      if (currentScreenIndex > 0) {
        slideQuestion('prev');
        currentScreenIndex--;
        setTimeout(() => {
          showCurrentScreen();
          scrollToTop();
        }, 250);
      }
    });

    nextBtn.addEventListener('click', () => {
      if (saveCurrentAnswer()) {
        if (currentScreenIndex < screens.length - 1) {
          slideQuestion('next');
          currentScreenIndex++;
          setTimeout(() => {
            showCurrentScreen();
            scrollToTop();
          }, 250);
        } else {
          // Show LGPD consent before results
          showLGPDConsent();
        }
      }
    });

    function scrollToTop() {
      window.scrollTo(0, 0);
    }

    function slideQuestion(direction) {
      const translateX = direction === 'next' ? '-20px' : '20px';
      questionContainer.style.opacity = '0';
      questionContainer.style.transform = `translateX(${translateX})`;
    }

    function updateProgress() {
      const totalScreens = screens.length + 1; // +1 for LGPD
      const currentStep = currentScreenIndex + 1;
      const progressPercent = Math.round((currentStep / totalScreens) * 100);
      
      // Update counters
      stepCounter.textContent = `${currentStep}/${totalScreens}`;
      percentCounter.textContent = `${progressPercent}%`;
      
      // Update progress bar
      progressBar.style.width = `${progressPercent}%`;
    }

    function showCurrentScreen() {
      const currentScreen = screens[currentScreenIndex];
      
      // Update progress indicators
      updateProgress();
      
      questionTitle.textContent = currentScreen.title;
      
      prevBtn.classList.toggle('opacity-50', currentScreenIndex === 0);
      prevBtn.classList.toggle('pointer-events-none', currentScreenIndex === 0);
      
      if (currentScreen.type === "field") {
        renderField(currentScreen.field);
      } else if (currentScreen.type === "options") {
        renderOptions(currentScreen.options);
        nextBtn.classList.add('opacity-50', 'pointer-events-none');
      }
      
      questionContainer.style.opacity = '1';
      questionContainer.style.transform = 'translateX(0)';
      
      lucide.createIcons({ strokeWidth: 1.5 });
    }

    function renderField(field) {
      let inputValue = answers[field.name] || '';
      
      optionsContainer.innerHTML = `
        <div>
          <input 
            id="${field.name}" 
            name="${field.name}" 
            type="${field.type}"
            placeholder="${field.placeholder}"
            ${field.required ? 'required' : ''}
            class="form-input w-full rounded-lg px-4 py-3 text-white placeholder-white/50"
            value="${inputValue}"
          />
          <div id="${field.name}Error" class="error-message hidden"></div>
        </div>
      `;

      const input = document.getElementById(field.name);
      const errorDiv = document.getElementById(`${field.name}Error`);
      
      // Phone mask
      if (field.validation === 'phone') {
        input.addEventListener('input', (e) => {
          e.target.value = formatPhone(e.target.value);
        });
      }
      
      input.addEventListener('input', () => {
        // Clear error state
        input.classList.remove('error');
        errorDiv.classList.add('hidden');
        
        if (input.value.trim()) {
          nextBtn.classList.remove('opacity-50', 'pointer-events-none');
        } else {
          nextBtn.classList.add('opacity-50', 'pointer-events-none');
        }
      });
      
      // If there's already a value, enable the button
      if (input.value.trim()) {
        nextBtn.classList.remove('opacity-50', 'pointer-events-none');
      }
      
      // Focus the input automatically
      setTimeout(() => input.focus(), 300);
    }

    function renderOptions(options) {
      const savedIndex = answers[screens[currentScreenIndex].id];
      
      optionsContainer.innerHTML = options.map((option, index) => `
        <button type="button" class="option-btn w-full text-left liquid-glass-element rounded-xl p-4 transition-all duration-200 group ${savedIndex === index ? 'selected' : ''}" data-index="${index}">
          <span class="text-sm font-medium text-white/90 group-hover:text-white">${option.text}</span>
        </button>
      `).join('');

      // Re-enable next button if there's a saved selection
      if (savedIndex !== undefined) {
        nextBtn.classList.remove('opacity-50', 'pointer-events-none');
      }

      document.querySelectorAll('.option-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          btn.style.transform = 'scale(0.98)';
          setTimeout(() => btn.style.transform = 'scale(1)', 150);
          
          document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
          btn.classList.add('selected');
          
          nextBtn.classList.remove('opacity-50', 'pointer-events-none');
          
          // Auto-advance after selecting an option
          setTimeout(() => {
            if (currentScreenIndex < screens.length - 1) {
              saveCurrentAnswer();
              slideQuestion('next');
              currentScreenIndex++;
              setTimeout(() => {
                showCurrentScreen();
                scrollToTop();
              }, 250);
            } else {
              saveCurrentAnswer();
              showLGPDConsent();
            }
          }, 300);
        });
      });
    }

    function saveCurrentAnswer() {
      const currentScreen = screens[currentScreenIndex];
      
      if (currentScreen.type === "field") {
        const input = document.getElementById(currentScreen.field.name);
        const errorDiv = document.getElementById(`${currentScreen.field.name}Error`);
        const value = input.value.trim();
        
        if (!value && currentScreen.field.required) {
          input.classList.add('error');
          errorDiv.textContent = 'Este campo é obrigatório';
          errorDiv.classList.remove('hidden');
          return false;
        }
        
        // Validate specific fields
        if (currentScreen.field.validation === 'email' && !validateEmail(value)) {
          input.classList.add('error');
          errorDiv.textContent = 'Por favor, insira um e-mail válido';
          errorDiv.classList.remove('hidden');
          return false;
        }
        
        if (currentScreen.field.validation === 'phone' && !validatePhone(value)) {
          input.classList.add('error');
          errorDiv.textContent = 'Por favor, insira um telefone válido';
          errorDiv.classList.remove('hidden');
          return false;
        }
        
        answers[currentScreen.field.name] = value;
        
        // Store user data for the first three screens
        if (currentScreen.id === "name") userData.fullName = value;
        if (currentScreen.id === "email") userData.email = value;
        if (currentScreen.id === "phone") userData.phone = value;
        
        return true;
      } else if (currentScreen.type === "options") {
        const selectedOption = document.querySelector('.option-btn.selected');
        
        if (!selectedOption) {
          return false;
        }
        
        const index = parseInt(selectedOption.dataset.index);
        answers[currentScreen.id] = index;
        
        // Store the actual answer text
        const option = currentScreen.options[index];
        questionAnswers[currentScreen.id] = option.text;
        
        // Calculate points
        totalPoints += option.points;
        
        // Check for eliminatory criteria
        if (option.eliminatory === true) {
          eliminatoryTriggered = true;
        }
        
        // Special case for "Estou apenas explorando" + low score
        if (option.eliminatory === "lowScore" && totalPoints < 60) {
          eliminatoryTriggered = true;
        }
        
        return true;
      }
      
      return false;
    }

    function showLGPDConsent() {
      questionsSection.style.opacity = '0';
      questionsSection.style.transform = 'translateX(-20px)';
      
      setTimeout(() => {
        questionsSection.classList.add('hidden');
        lgpdSection.classList.remove('hidden');
        lgpdSection.style.opacity = '0';
        lgpdSection.style.transform = 'translateX(20px)';
        
        setTimeout(() => {
          lgpdSection.style.opacity = '1';
          lgpdSection.style.transform = 'translateX(0)';
        }, 50);
        
        // Update progress for LGPD step
        const totalScreens = screens.length + 1;
        progressBar.style.width = `${Math.round((screens.length / totalScreens) * 100)}%`;
        stepCounter.textContent = `${screens.length + 1}/${totalScreens}`;
        percentCounter.textContent = `${Math.round(((screens.length + 1) / totalScreens) * 100)}%`;
      }, 400);
    }

    async function saveLeadToGoogleSheets() {
      if (GOOGLE_APPS_SCRIPT_URL === 'YOUR_GOOGLE_APPS_SCRIPT_URL') {
        console.warn('Google Apps Script not configured');
        return true; // Continue anyway in development
      }

      const leadData = {
        fullName: userData.fullName,
        email: userData.email,
        phone: userData.phone,
        companyMoment: questionAnswers.currentState || '',
        mainDesire: questionAnswers.mainDesire || '',
        involvementLevel: questionAnswers.involvement || '',
        investmentCapacity: questionAnswers.investment || '',
        projectTiming: questionAnswers.timing || '',
        aiVision: questionAnswers.aiVision || '',
        totalPoints: totalPoints,
        qualifiedForProjects: totalPoints >= 80 && !eliminatoryTriggered,
        lgpdAccepted: lgpdAccepted,
        marketingAccepted: marketingAccepted,
        userAgent: navigator.userAgent,
        pageUrl: window.location.href
      };

      try {
        const response = await fetch(GOOGLE_APPS_SCRIPT_URL, {
          method: 'POST',
          mode: 'no-cors', // Google Apps Script não suporta CORS
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(leadData)
        });

        // Com no-cors, não conseguimos ler a resposta, mas assumimos sucesso se não houver erro
        console.log('Lead enviado para Google Sheets');
        return true;
      } catch (err) {
        console.error('Erro ao enviar dados:', err);
        
        // Tentativa de fallback: abrir formulário do Google com dados preenchidos
        const fallbackUrl = `https://docs.google.com/forms/d/e/YOUR_GOOGLE_FORM_ID/viewform?` +
          `entry.1234567890=${encodeURIComponent(userData.fullName)}` +
          `&entry.0987654321=${encodeURIComponent(userData.email)}` +
          `&entry.1122334455=${encodeURIComponent(userData.phone)}`;
        
        // Comentado: só usar se tiver um Google Form de backup
        // window.open(fallbackUrl, '_blank');
        
        showToast('Houve um problema ao enviar seus dados. Por favor, entre em contato via WhatsApp.', 'error');
        return false;
      }
    }

    async function showFinalResults() {
      // Show loading state
      if (lgpdSection && !lgpdSection.classList.contains('hidden')) {
        lgpdContinueBtn.disabled = true;
        lgpdContinueBtn.innerHTML = '<div class="loading-spinner mx-auto"></div>';
      }

      // Save to Google Sheets
      const saved = await saveLeadToGoogleSheets();
      
      if (!saved) {
        // Re-enable button if save failed
        if (lgpdContinueBtn) {
          lgpdContinueBtn.disabled = false;
          lgpdContinueBtn.innerHTML = `
            <span>Aceitar e continuar</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="arrow-right" class="lucide lucide-arrow-right w-4 h-4"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg>
          `;
        }
        return;
      }

      // Hide current section and show results
      const currentSection = lgpdSection.classList.contains('hidden') ? questionsSection : lgpdSection;
      
      currentSection.style.opacity = '0';
      currentSection.style.transform = 'translateX(-20px)';
      
      setTimeout(() => {
        currentSection.classList.add('hidden');
        resultsSection.classList.remove('hidden');
        resultsSection.style.opacity = '0';
        resultsSection.style.transform = 'translateX(20px)';
        
        // Determine which result to show based on scoring
        if (totalPoints >= 80 && !eliminatoryTriggered) {
          resultsQualified.classList.remove('hidden');
        } else {
          resultsTrendlyAI.classList.remove('hidden');
        }
        
        setTimeout(() => {
          resultsSection.style.opacity = '1';
          resultsSection.style.transform = 'translateX(0)';
        }, 50);
      }, 400);
      
      // Update progress to 100%
      progressBar.style.width = '100%';
      const totalSteps = screens.length + 1;
      stepCounter.textContent = `${totalSteps}/${totalSteps}`;
      percentCounter.textContent = '100%';
      
      lucide.createIcons({ strokeWidth: 1.5 });
      
      // Log final data
      console.log("Form completed successfully!");
      console.log("User Data:", userData);
      console.log("Answers:", questionAnswers);
      console.log("Total Points:", totalPoints);
      console.log("Qualified for Trendly Projects:", totalPoints >= 80 && !eliminatoryTriggered);
    }
  </script>

</body></html>